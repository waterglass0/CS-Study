# 4. 데이터베이스(DB, DataBase)
- 일정한 규칙, 규약을 통해 구조화되어 저장되어 있는 데이터의 모음
- DBMS(DataBase Management System): 데이터베이스를 제어, 관리하는 통합 시스템
  - DBMS마다 정의된 특정 쿼리 언어를 통해 데이터베이스 내부의 데이터들을 삽입, 삭제, 수정, 조회할 수 있다.
  - 실시간 접근, 동시 공유 가능
- 구조
  |응용 프로그램|
  |---|
  |DBMS|
  |데이터베이스|

<br>

# 4.1 데이터베이스의 기본
# 4.1.1 엔터티(entity)
- 사람, 장소, 물건, 사건, 개념 등 여러 개의 속성을 지닌 명사
- ex) 회원 엔티티는 이름, 아이디, 주소, 전화번호 등의 속성을 가진다.
- 속성은 서비스의 요구 사항에 맞춰 정해진다.

## 약한 엔터티와 강한 엔터티
- 약한 엔터티: 강한 엔터티가 있어야만 존재할 수 있는 종속적인 엔터티
- ex) 건물은 강한 엔터티, 방은 약한 엔터티

<br>

# 4.1.2 릴레이션(relation)
- 데이터베이스에서 정보를 구분하여 저장하는 기본 단위
- 엔터티 하나에 관한 데이터 => 릴레이션 하나에 담김
- 명칭
  - 관계형 데이터베이스에서는 '테이블'
  - NoSQL에서는 '컬렉션'

## 테이블과 컬렉션
- 데이터베이스의 종류와 구조
  - 관계형 데이터베이스: 레코드-테이블-데이터베이스
  - NoSQL: 도큐먼트-컬렉션-데이터베이스

<br>

# 4.1.3 속성(attribute)
- 릴레이션에서 관리하는 구체적이며 고유한 이름을 갖는 정보
- 엔터티의 특징 중 서비스에서 요구되는 것들만 엔티티의 속성이 된다.

<br>

# 4.1.4 도메인(domain)
- 각각의 속성이 가질 수 있는 값의 집합
- ex) 성별이 속성이라면, 도메인은 {남, 여} 집합이다.

<br>

# 4.1.5 필드와 레코드
- 테이블
  - 속성 = 필드
  - 테이블의 행(row) = 레코드 = 튜플
- 속성에 맞는 타입을 정의해야 한다.
- 속성의 이름은 영어 이름으로 쓴다.

## 필드 타입
- DBMS 마다 다르다. 여기서는 MySQL을 기준으로 함

### 숫자 타입
- TINYINT, SMALLINT, MEDIUMINT, INT, BIGINT 등이 있다.
  - 오른쪽으로 갈수록 최솟값~최댓값 범위가 넓음

### 날짜 타입
#### DATE
- 날짜만 있고 시간은 없다.
- 지원범위: 1000-01-01 ~ 9999-12-31
#### DATETIME
- 날짜, 시간 모두 포함
- 지원범위: 1000-01-01 00:00:00 ~ 9999-12-31 23:59:59
- 8바이트 용량
#### TIMESTAMP
- 날짜, 시간 모두 포함
- 지원범위: 1970-01-01 00:00:01 ~ 2038-01-19 03:14:07
- 4바이트 용량

### 문자 타입
#### CHAR, VARCHAR
- CHAR(5) 처럼 최대 몇 자까지 입력 가능한지 설정해야 한다.
- CHAR
  - 테이블 생성시 선언한 길이로 고정된다.
    - 검색에 유리
  - 길이: 0 ~ 255 사이의 값
  - VARCHAR
    - 가변 길이 문자열. 입력한 데이터에 따라 용량을 가변시켜 저장한다.
      - 검색을 별로 하지 않고, 유동적인 길이의 데이터에 적당
    - 길이: 0 ~ 65535 사이의 값
    - VARCHAR(10000)으로 선언해도, 10글자의 레코드를 저장할 때 `10글자 바이트 + 길이기록용 1바이트`로 저장됨
#### TEXT, BLOB
- 큰 데이터를 저장할 때 씀
- TEXT
  - 큰 문자열 저장에 사용
  - 주로 게시판의 본문을 저장할 때 사용
- BLOB
  - 이미지, 동영상 등 큰 데이터 저장에 사용
  - 보통은 S3(아마존 이미지 호스팅 서비스)를 사용하여 서버에 파일을 올리고, 파일 경로를 VARCHAR로 저장한다.
#### ENUM과 SET
- 문자열을 열거한 타입
- 장점: 메모리 공간적 이점
- 단점: 애플리케이션의 수정이 있을 때 ENUM이나 SET에서 정의한 목록을 수정해야 한다.
- ENUM
  - ENUM('문자열1', '문자열2') 형태로 쓰임
    - 이중에서 하나만 선택해야한다.
    - 리스트에 없는 값을 삽입하면 빈 문자열이 대신 삽입된다.
    - 최대 65535개의 요소를 넣을 수 있음
  - ENUM을 쓰면 '문자열1' 등이 0, 1로 매핑되어 메모리를 적게 사용할 수 있다.
- SET
  - ENUM과의 차이점
    - 여러 개의 데이터를 선택할 수 있다
    - 비트 단위 연산 가능
    - 최대 64개의 요소를 넣을 수 있음

<br>

# 4.1.6 관계
- 데이터베이스에 있는 여러 개의 테이블은 서로 관계가 정의되어 있다. 이러한 관계는 관계화살표로 나타낸다.

## 1:1 관계
- ex) 유저 당 유저 이메일은 한개일 때
- 1:1 관계에서는 두 개의 테이블로 나눠져 테이블 구조를 더 이해하게 쉽다.

## 1:N 관계
- ex) 한 유저당 여러 개의 상품을 장바구니에 넣을 때. 장바구니가 비어있을 수 있으므로 화살표에 0을 포함시킨다.
- 한 개체가 다른 많은 개체를 포함하는 관계

## N:M 관계
- 학생과 강의의 관계: 학생도 강의를 많이 들을 수 있고, 강의도 여러 명의 학생을 포함할 수 있다.
- `학생_강의`라는 테이블을 끼워넣는다. 테이블 두 개를 직접 연결하지 않고, 1:N, M:1 관계 두 개로 나눠서 설정한다.



